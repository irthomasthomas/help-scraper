LIST-RETIRABLE-GRANTS()                                LIST-RETIRABLE-GRANTS()



NAME
       list-retirable-grants -

DESCRIPTION
       Returns information about all grants in the Amazon Web Services account
       and Region that have the specified retiring principal.

       You can specify any principal in your Amazon Web Services account.  The
       grants that are returned include grants for KMS keys in your Amazon Web
       Services account and other Amazon Web Services accounts. You might  use
       this  operation  to  determine which grants you may retire. To retire a
       grant, use the  RetireGrant operation.

       For detailed information about grants, including grant terminology, see
       Grants  in  KMS in the * Key Management Service Developer Guide * . For
       examples of working with grants in several programming  languages,  see
       Programming grants .
          Cross-account  use : You must specify a principal in your Amazon Web
          Services account. However, this operation can return grants  in  any
          Amazon Web Services account. You do not need kms:ListRetirableGrants
          permission (or any other additional permission) in  any  Amazon  Web
          Services account other than your own.

          Required  permissions : kms:ListRetirableGrants (IAM policy) in your
          Amazon Web Services account.

          Related operations:

       o CreateGrant

       o ListGrants

       o RetireGrant

       o RevokeGrant

       See also: AWS API Documentation

       list-retirable-grants is a paginated operation. Multiple API calls  may
       be  issued in order to retrieve the entire data set of results. You can
       disable pagination by providing the --no-paginate argument.  When using
       --output  text  and  the  --query argument on a paginated response, the
       --query argument must extract data from the results  of  the  following
       query expressions: Grants

SYNOPSIS
            list-retirable-grants
          --retiring-principal <value>
          [--cli-input-json <value>]
          [--starting-token <value>]
          [--page-size <value>]
          [--max-items <value>]
          [--generate-cli-skeleton <value>]
          [--debug]
          [--endpoint-url <value>]
          [--no-verify-ssl]
          [--no-paginate]
          [--output <value>]
          [--query <value>]
          [--profile <value>]
          [--region <value>]
          [--version <value>]
          [--color <value>]
          [--no-sign-request]
          [--ca-bundle <value>]
          [--cli-read-timeout <value>]
          [--cli-connect-timeout <value>]

OPTIONS
       --retiring-principal (string)
          The  retiring  principal for which to list grants. Enter a principal
          in your Amazon Web Services account.

          To specify the retiring principal,  use  the  Amazon  Resource  Name
          (ARN)  of an Amazon Web Services principal. Valid principals include
          Amazon Web Services accounts, IAM users, IAM roles, federated users,
          and  assumed  role users. For help with the ARN syntax for a princi-
          pal, see IAM ARNs in the * Identity and Access Management User Guide
          * .

       --cli-input-json  (string) Performs service operation based on the JSON
       string provided. The JSON string follows the format provided by  --gen-
       erate-cli-skeleton.  If  other  arguments  are  provided on the command
       line, the CLI values will override the JSON-provided values. It is  not
       possible to pass arbitrary binary values using a JSON-provided value as
       the string will be taken literally.

       --starting-token (string)
          A token to specify where to start paginating. This is the  NextToken
          from a previously truncated response.

          For usage examples, see Pagination in the AWS Command Line Interface
          User Guide .

       --page-size (integer)
          The size of each page to get in the AWS service call. This does  not
          affect the number of items returned in the command's output. Setting
          a smaller page size results in more calls to the  AWS  service,  re-
          trieving  fewer  items  in  each call. This can help prevent the AWS
          service calls from timing out.

          For usage examples, see Pagination in the AWS Command Line Interface
          User Guide .

       --max-items (integer)
          The  total number of items to return in the command's output. If the
          total number of items available is more than the value specified,  a
          NextToken is provided in the command's output. To resume pagination,
          provide the NextToken value in the starting-token argument of a sub-
          sequent  command. Do not use the NextToken response element directly
          outside of the AWS CLI.

          For usage examples, see Pagination in the AWS Command Line Interface
          User Guide .

       --generate-cli-skeleton  (string)  Prints  a  JSON skeleton to standard
       output without sending an API request. If provided with no value or the
       value input, prints a sample input JSON that can be used as an argument
       for --cli-input-json. If provided with the value output,  it  validates
       the command inputs and returns a sample output JSON for that command.

GLOBAL OPTIONS
       --debug (boolean)

       Turn on debug logging.

       --endpoint-url (string)

       Override command's default URL with the given URL.

       --no-verify-ssl (boolean)

       By  default, the AWS CLI uses SSL when communicating with AWS services.
       For each SSL connection, the AWS CLI will verify SSL certificates. This
       option overrides the default behavior of verifying SSL certificates.

       --no-paginate (boolean)

       Disable automatic pagination.

       --output (string)

       The formatting style for command output.

       o json

       o text

       o table

       --query (string)

       A JMESPath query to use in filtering the response data.

       --profile (string)

       Use a specific profile from your credential file.

       --region (string)

       The region to use. Overrides config/env settings.

       --version (string)

       Display the version of this tool.

       --color (string)

       Turn on/off color output.

       o on

       o off

       o auto

       --no-sign-request (boolean)

       Do  not  sign requests. Credentials will not be loaded if this argument
       is provided.

       --ca-bundle (string)

       The CA certificate bundle to use when verifying SSL certificates. Over-
       rides config/env settings.

       --cli-read-timeout (int)

       The  maximum socket read time in seconds. If the value is set to 0, the
       socket read will be blocking and not timeout. The default value  is  60
       seconds.

       --cli-connect-timeout (int)

       The  maximum  socket connect time in seconds. If the value is set to 0,
       the socket connect will be blocking and not timeout. The default  value
       is 60 seconds.

EXAMPLES
       NOTE:
          To  use  the following examples, you must have the AWS CLI installed
          and configured. See the Getting started guide in the  AWS  CLI  User
          Guide for more information.

          Unless  otherwise  stated,  all  examples  have  unix-like quotation
          rules. These examples will need to be  adapted  to  your  terminal's
          quoting rules. See Using quotation marks with strings in the AWS CLI
          User Guide .

       To view the grants that a principal can retire

       The following list-retirable-grants example displays all of the  grants
       that the ExampleAdmin user can retire on the KMS keys in an AWS account
       and Region. You can use a command like this one to view the grants that
       any account principal can retire on KMS keys in the AWS account and Re-
       gion.

       The value of the required retiring-principal parameter must be the Ama-
       zon Resource Name (ARN) of an account, user, or role.

       You  cannot  specify  a  service for the value of retiring-principal in
       this command, even though a service can be the retiring  principal.  To
       find  the  grants in which a particular service is the retiring princi-
       pal, use the list-grants command.

       The output shows that ExampleAdmin user has permission to retire grants
       on two different KMS keys in the account and region. In addition to the
       retiring principal, the account has permission to retire any  grant  in
       the account.

          aws kms list-retirable-grants \
              --retiring-principal arn:aws:iam::111122223333:user/ExampleAdmin

       Output:

          {
              "Grants": [
                  {
                      "KeyId": "arn:aws:kms:us-west-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab",
                      "GrantId": "156b69c63cb154aa21f59929ff19760717be8d9d82b99df53e18b94a15a5e88e",
                      "Name": "",
                      "CreationDate": 2021-01-14T20:17:36.419000+00:00,
                      "GranteePrincipal": "arn:aws:iam::111122223333:user/ExampleUser",
                      "RetiringPrincipal": "arn:aws:iam::111122223333:user/ExampleAdmin",
                      "IssuingAccount": "arn:aws:iam::111122223333:root",
                      "Operations": [
                          "Encrypt"
                      ],
                      "Constraints": {
                          "EncryptionContextSubset": {
                              "Department": "IT"
                          }
                      }
                  },
                  {
                      "KeyId": "arn:aws:kms:us-west-2:111122223333:key/0987dcba-09fe-87dc-65ba-ab0987654321",
                      "GrantId": "8c94d1f12f5e69f440bae30eaec9570bb1fb7358824f9ddfa1aa5a0dab1a59b2",
                      "Name": "",
                      "CreationDate": "2021-02-02T19:49:49.638000+00:00",
                      "GranteePrincipal": "arn:aws:iam::111122223333:role/ExampleRole",
                      "RetiringPrincipal": "arn:aws:iam::111122223333:user/ExampleAdmin",
                      "IssuingAccount": "arn:aws:iam::111122223333:root",
                      "Operations": [
                          "Decrypt"
                      ],
                      "Constraints": {
                          "EncryptionContextSubset": {
                              "Department": "IT"
                          }
                      }
                  }
              ],
              "Truncated": false
          }

       For  more  information, see Grants in AWS KMS in the AWS Key Management
       Service Developer Guide.

OUTPUT
       Grants -> (list)
          A list of grants.

          (structure)
              Contains information about a grant.

              KeyId -> (string)
                 The unique identifier for the KMS key to which the grant  ap-
                 plies.

              GrantId -> (string)
                 The unique identifier for the grant.

              Name -> (string)
                 The  friendly  name  that identifies the grant. If a name was
                 provided in the  CreateGrant request, that name is  returned.
                 Otherwise this value is null.

              CreationDate -> (timestamp)
                 The date and time when the grant was created.

              GranteePrincipal -> (string)
                 The identity that gets the permissions in the grant.

                 The GranteePrincipal field in the ListGrants response usually
                 contains the user or role designated as the grantee principal
                 in  the  grant.  However,  when  the grantee principal in the
                 grant is an Amazon Web Services service, the GranteePrincipal
                 field  contains the service principal , which might represent
                 several different grantee principals.

              RetiringPrincipal -> (string)
                 The principal that can retire the grant.

              IssuingAccount -> (string)
                 The Amazon Web Services account under which the grant was is-
                 sued.

              Operations -> (list)
                 The list of operations permitted by the grant.

                 (string)

              Constraints -> (structure)
                 A list of key-value pairs that must be present in the encryp-
                 tion context of certain subsequent operations that the  grant
                 allows.

                 EncryptionContextSubset -> (map)
                     A  list  of  key-value pairs that must be included in the
                     encryption context of  the  cryptographic  operation  re-
                     quest.  The grant allows the cryptographic operation only
                     when the encryption context in the request  includes  the
                     key-value pairs specified in this constraint, although it
                     can include additional key-value pairs.

                     key -> (string)

                     value -> (string)

                 EncryptionContextEquals -> (map)
                     A list of key-value pairs that must match the  encryption
                     context in the cryptographic operation request. The grant
                     allows the operation only when the encryption context  in
                     the  request is the same as the encryption context speci-
                     fied in this constraint.

                     key -> (string)

                     value -> (string)

       NextMarker -> (string)
          When Truncated is true, this element is  present  and  contains  the
          value to use for the Marker parameter in a subsequent request.

       Truncated -> (boolean)
          A flag that indicates whether there are more items in the list. When
          this value is true, the list in this response is truncated.  To  get
          more items, pass the value of the NextMarker element in thisresponse
          to the Marker parameter in a subsequent request.



                                                       LIST-RETIRABLE-GRANTS()
